<div class="tab-content active" data-tab-content="personal-info">
  <div class="mt-2 bg-white rounded-lg shadow-sm border p-6">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-xl font-semibold text-gray-900">Thông tin cá nhân</h2>
    </div>

    <form @submit.prevent="handleFormSubmit()" class="space-y-6">
      <!-- Avatar Section -->
      <div class="flex items-center space-x-6">
        <div class="relative">
          <img src="./../../assets/images/placeholder.svg?height=100&width=100" alt="Avatar"
            class="w-24 h-24 rounded-full object-cover border-4 border-gray-200">
          <button type="button" @click="$refs.avatarInput.click()"
            class="absolute bottom-0 right-0 bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-blue-600 transition-colors"
            :disabled="!isEditing">
            <i data-lucide="camera" class="w-4 h-4"></i>
          </button>
          <!-- Hidden file input -->
          <input type="file" x-ref="avatarInput" accept="image/*" class="hidden">
        </div>
        <div>
          <h3 class="text-lg font-medium text-gray-900" x-text="userInfo.fullname || 'Chưa cập nhật'">
          </h3>
          <p class="text-gray-500" x-text="userInfo.email || 'Chưa cập nhật'"></p>
        </div>
      </div>

      <!-- Form Fields -->
      <div class="grid md:grid-cols-2 gap-6">
        <!-- Full Name -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Họ và tên</label>
          <input type="text" x-model="userInfo.fullname" :disabled="!isEditing" class="input"
            :class="{ 'bg-gray-100 cursor-not-allowed': !isEditing }" placeholder="Nhập họ và tên">
          <div x-show="errors.fullname" class="text-red-500 text-sm mt-1" x-text="errors.fullname">
          </div>
        </div>

        <!-- Email -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
          <input type="email" x-model="userInfo.email" :disabled="!isEditing" class="input"
            :class="{ 'bg-gray-100 cursor-not-allowed': !isEditing }" placeholder="Nhập email">
          <div x-show="errors.email" class="text-red-500 text-sm mt-1" x-text="errors.email"></div>
        </div>

        <!-- Phone -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Số điện thoại</label>
          <input type="tel" x-model="userInfo.phone" :disabled="!isEditing" class="input"
            :class="{ 'bg-gray-100 cursor-not-allowed': !isEditing }" placeholder="Nhập số điện thoại">
          <div x-show="errors.phone" class="text-red-500 text-sm mt-1" x-text="errors.phone"></div>
        </div>

        <!-- Date of Birth -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Ngày sinh</label>
          <input type="date" x-model="userInfo.dateOfBirth" :disabled="!isEditing" class="input"
            :class="{ 'bg-gray-100 cursor-not-allowed': !isEditing }">
          <div x-show="errors.dateOfBirth" class="text-red-500 text-sm mt-1" x-text="errors.dateOfBirth"></div>
        </div>

        <!-- Gender -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Giới tính</label>
          <select x-model="userInfo.gender" :disabled="!isEditing" class="select"
            :class="{ 'bg-gray-100 cursor-not-allowed': !isEditing }">
            <option value="">Chọn giới tính</option>
            <option value="male">Nam</option>
            <option value="female">Nữ</option>
            <option value="other">Khác</option>
          </select>
          <div x-show="errors.gender" class="text-red-500 text-sm mt-1" x-text="errors.gender"></div>
        </div>

        <!-- Address -->
        <div class="md:col-span-2">
          <label class="block text-sm font-medium text-gray-700 mb-2">Địa chỉ</label>
          <textarea x-model="userInfo.address" :disabled="!isEditing" class="input"
            :class="{ 'bg-gray-100 cursor-not-allowed': !isEditing }" rows="3" placeholder="Nhập địa chỉ"></textarea>
          <div x-show="errors.address" class="text-red-500 text-sm mt-1" x-text="errors.address"></div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="flex justify-end gap-3 mt-4">
        <!-- Cancel button (only show when editing) -->
        <button x-cloak type="button" @click="cancelEdit()" class="btn btn-outline" x-show="isEditing">
          <i data-lucide="x" class="w-4 h-4 mr-2"></i>
          Hủy
        </button>

        <!-- Enable Edit button (only show when not editing) -->
        <button type="button" @click="enableEditMode()" class="btn btn-primary" x-show="!isEditing">
          <i data-lucide="edit" class="w-4 h-4 mr-2"></i>
          Cập nhật
        </button>

        <!-- Save button (only show when editing) -->
        <button x-cloak type="button" @click="updatePersonalInfo()" class="btn btn-primary" x-show="isEditing"
          :disabled="isSubmitting">
          <i data-lucide="save" class="w-4 h-4 mr-2" x-show="!isSubmitting"></i>
          <i data-lucide="loader" class="w-4 h-4 mr-2 animate-spin" x-show="isSubmitting"></i>
          <span x-text="isSubmitting ? 'Đang xử lý...' : 'Lưu thay đổi'"></span>
        </button>
      </div>
    </form>
  </div>
</div>