<div class="rounded-lg border bg-card text-card-foreground shadow-sm">
  <div class="flex flex-col space-y-1.5 p-6">
    <div class="text-2xl font-semibold leading-none tracking-tight">Ảnh</div>
  </div>
  <div class="p-6 pt-0">
    <div x-data="gallery()" class="relative">

      <!-- Grid ảnh tĩnh -->
      <div class="grid grid-cols-2 md:grid-cols-3 gap-4" x-ref="albumGrid">
        <div class="album-item">
          <img src="./../../assets/images/placeholder.svg?height=200&width=200&query=photo 1" alt="Photo 1"
            class="album-image" @click="openModal($el, 0)">
        </div>
        <div class="album-item">
          <img src="./../../assets/images/placeholder.svg?height=200&width=200&query=photo 2" alt="Photo 2"
            class="album-image" @click="openModal($el, 1)">
        </div>
        <div class="album-item">
          <img src="./../../assets/images/placeholder.svg?height=200&width=200&query=photo 3" alt="Photo 3"
            class="album-image" @click="openModal($el, 2)">
        </div>
        <div class="album-item">
          <img src="./../../assets/images/placeholder.svg?height=200&width=200&query=photo 4" alt="Photo 4"
            class="album-image" @click="openModal($el, 3)">
        </div>
        <div class="album-item">
          <img src="./../../assets/images/placeholder.svg?height=200&width=200&query=photo 5" alt="Photo 5"
            class="album-image" @click="openModal($el, 4)">
        </div>
        <div class="album-item">
          <img src="./../../assets/images/placeholder.svg?height=200&width=200&query=photo 6" alt="Photo 6"
            class="album-image" @click="openModal($el, 5)">
        </div>
      </div>

      <!-- Modal for album pictures -->
      <template x-if="isOpen">
        <div class="jmodal fixed inset-0 z-50 flex items-center justify-center bg-black/80" @click="closeModal">
          <div
            class="jmodal-content image-gallery relative w-full max-w-5xl h-[90vh] bg-black rounded-lg overflow-hidden flex flex-col"
            @click.stop>

            <!-- Header -->
            <div
              class="absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/50 to-transparent p-4 flex justify-between text-white">
              <div>
                <h3 class="text-lg font-semibold">Ảnh của Nguyễn Văn A</h3>
                <p class="text-sm opacity-75" x-text="(currentIndex+1) + ' / ' + images.length"></p>
              </div>
              <div class="flex items-center space-x-2">
                <button @click="handleDownload()" class="text-white hover:text-gray-300 p-2" title="Tải ảnh về máy">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7,10 12,15 17,10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                  </svg>
                </button>
                <button @click="closeModal" class="text-white hover:text-gray-300 p-2">✕</button>
              </div>
            </div>

            <!-- Ảnh chính -->
            <div class="flex-1 flex items-center justify-center">
              <img :src="images[currentIndex].src" :alt="images[currentIndex].alt"
                class="max-h-full max-w-full object-contain">
            </div>

            <!-- Nút trái/phải -->
            <button @click="prev" class="btn-prev">‹</button>
            <button @click="next" class="btn-next">›</button>

            <!-- Thumbnail -->
            <div
              class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/50 to-transparent p-4 flex justify-center space-x-2 overflow-x-auto">
              <template x-for="(img, index) in images" :key="index">
                <button @click="setIndex(index)" class="w-12 h-12 rounded-lg overflow-hidden border-2"
                  :class="index === currentIndex ? 'border-white' : 'border-transparent opacity-60 hover:opacity-80'">
                  <img :src="img.src" :alt="img.alt" class="object-cover-image">
                </button>
              </template>
            </div>
          </div>
        </div>
      </template>
    </div>
  </div>
</div>